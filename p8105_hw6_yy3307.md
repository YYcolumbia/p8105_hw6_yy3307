p8105_hw6_yy3307
================
2022-11-29

## Problem 1

## Problem 2

First we need to import and clean the `homicide` dataset. Then I’m going
to create a `city_state` variable as combination of `city` and `state`,
with a binary variable indicating whether the homicide is solved.
`victim_age` will be `mutate` as numeric expression. Dallas, TX;
Phoenix, AZ; Kansas City, MO; Tulsa, AL are being omitted and we only
focus our analysis on those for whom `victim_race` is `white` or
`black`.

``` r
homicide_raw = 
  read.csv("https://raw.githubusercontent.com/washingtonpost/data-homicides/master/homicide-data.csv") %>% 
  janitor::clean_names() %>% 
  mutate(
    city_state = str_c(city, ", ", state),
    solve_binary = as.numeric(
      ifelse(disposition == "Closed by arrest", 1, 0)
    ),
    victim_age = as.numeric(victim_age)
  ) %>% 
  filter(
    city_state != "Dallas, TX", 
    city_state != "Phoenix, AZ", 
    city_state != "Kansas City, MO", 
    city_state != "Tulsa, AL"
  ) %>% 
  filter(victim_race %in% c("White", "Black"))
```

Then I’m going to use the `glm` function to fit a logistic regression
with resolved vs unresolved as the outcome and victim age, sex and race
as predictors for city of Baltimore, MD. After applying `broom::tidy` to
it, we need to calculate the estimate and confidence interval.

``` r
baltimore_logistic =
  homicide_raw %>% 
  filter(city_state == "Baltimore, MD") %>% 
  glm(solve_binary ~ victim_age + victim_sex + victim_race, data = ., family = binomial()) %>% 
  broom::tidy() %>% 
  mutate(
    OR = exp(estimate),
    CI_upper = exp(estimate - 1.96 * std.error),
    CI_lower = exp(estimate - 1.96 * std.error)
  ) %>% 
  select(term, log_OR = estimate, OR, CI_lower, CI_upper) %>% 
  knitr::kable(digits = 3)

baltimore_logistic
```

| term             | log_OR |    OR | CI_lower | CI_upper |
|:-----------------|-------:|------:|---------:|---------:|
| (Intercept)      |  0.310 | 1.363 |    0.975 |    0.975 |
| victim_age       | -0.007 | 0.993 |    0.987 |    0.987 |
| victim_sexMale   | -0.854 | 0.426 |    0.325 |    0.325 |
| victim_raceWhite |  0.842 | 2.320 |    1.648 |    1.648 |

## Problem 3
